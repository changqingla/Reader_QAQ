# ============================================================================
# LLM 配置 (统一配置)
# ============================================================================
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_API_BASE=http://10.0.1.5:7997/v1
MODEL_NAME=Qwen/Qwen3-30B-A3B-Instruct-2507  # 统一模型（推理+Token计算）
TEMPERATURE=0.3  # 统一温度（推理+压缩）

# ============================================================================
# 上下文和 Token 管理
# ============================================================================
MAX_CONTEXT_TOKENS=128000  # 模型最大上下文窗口
DIRECT_CONTENT_THRESHOLD=0.7  # 直接内容模式阈值：文档<70%可用tokens时直接使用

# ============================================================================
# Agent 配置
# ============================================================================
ENABLE_WEB_SEARCH=false
MAX_REPLAN_ATTEMPTS=1
EXECUTION_TIMEOUT=300

# ============================================================================
# 上下文压缩配置
# ============================================================================
COMPRESSION_THRESHOLD_RATIO=0.8  # 达到80%上下文时触发压缩
COMPRESSION_PRESERVE_RATIO=0.3  # 保留最近30%的消息不压缩

# ============================================================================
# 时间窗口注入配置
# ============================================================================
INTENT_RECOGNITION_TURNS=2
PLANNING_TURNS=2
ANSWER_GENERATION_TURNS=3
EXECUTION_TURNS=0

# ============================================================================
# Redis 配置
# ============================================================================
REDIS_HOST=10.0.169.144
REDIS_PORT=6378
REDIS_DB=3
REDIS_USERNAME=wangyue
REDIS_PASSWORD=wangyue123
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
SESSION_CACHE_TTL=3600
MESSAGE_CACHE_TTL=1800

# ============================================================================
# PostgreSQL 配置
# ============================================================================
POSTGRES_HOST=10.0.169.144
POSTGRES_PORT=5434
POSTGRES_DB=wangyue_postgres
POSTGRES_USER=wangyue
POSTGRES_PASSWORD=wangyue_dev_password
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20

# ============================================================================
# 性能配置
# ============================================================================
BATCH_SIZE=100
ENABLE_CACHE=true
CACHE_READ_TIMEOUT=2

# ============================================================================
# Recall API 配置
# ============================================================================
RECALL_API_URL=http://10.0.169.144:7791/api/recall
RECALL_INDEX_NAMES=test
RECALL_DOC_IDS=["test1"]
RECALL_ES_HOST=http://10.0.100.36:9201
RECALL_TOP_N=100
RECALL_SIMILARITY_THRESHOLD=0.01
RECALL_VECTOR_SIMILARITY_WEIGHT=0.3

# Recall Model
RECALL_MODEL_FACTORY=VLLM
RECALL_MODEL_NAME=bge-m3
RECALL_MODEL_BASE_URL=http://10.0.1.4:8002/v1
RECALL_API_KEY=EMPTY

# Recall Rerank
RECALL_USE_RERANK=true
RECALL_RERANK_FACTORY=openai
RECALL_RERANK_MODEL_NAME=bge-reranker-v2-m3
RECALL_RERANK_BASE_URL=http://10.0.1.4:8001/v1
RECALL_RERANK_API_KEY=EMPTY

# ============================================================================
# Tavily Web Search
# ============================================================================
TAVILY_API_KEY=your-tavily-api-key
TAVILY_MAX_RESULTS=5

# ============================================================================
# Logging & API
# ============================================================================
LOG_LEVEL=INFO
LOG_FILE=./logs/agent.log
API_HOST=0.0.0.0
API_PORT=8008
